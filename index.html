<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My First Game - Sky Jumper</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap');
  body, html {
    margin: 0; padding: 0; background: #0d1b2a; color: #4a90e2;
    font-family: 'Poppins', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    user-select: none;
  }
  h1 {
    margin: 30px 0 10px;
    text-align: center;
    text-shadow: 0 0 10px #357abd;
  }
  #gameContainer {
    position: relative;
    max-width: 90vw;
    max-height: 50vh;
    box-shadow: 0 0 30px #0f3460;
    border-radius: 15px;
  }
  canvas {
    display: block;
    width: 100%;
    height: auto;
    border-radius: 15px;
    background: linear-gradient(180deg, #14233c 0%, #0d1b2a 100%);
  }
  #gameOverScreen {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    color: #f0f0f0;
    text-align: center;
    background: rgba(13, 27, 42, 0.9);
    border: 2px solid #4a90e2;
    border-radius: 20px;
    padding: 30px 40px;
    font-size: 24px;
    display: none;
    z-index: 10;
    width: 90%;
    max-width: 350px;
  }
  #restartBtn {
    margin-top: 20px;
    padding: 10px 30px;
    font-size: 20px;
    color: #0d1b2a;
    background: #4a90e2;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #restartBtn:hover {
    background: #357abd;
  }
  @media (max-width: 600px) {
    h1 {
      font-size: 1.6rem;
      margin: 20px 0 10px;
    }
  }
</style>
</head>
<body>

<h1>My First Game - Sky Jumper</h1>
<div id="gameContainer">
  <canvas id="gameCanvas" width="800" height="400"></canvas>
  <div id="gameOverScreen">
    <div id="finalScore"></div>
    <button id="restartBtn">Restart</button>
  </div>
</div>

<script>
(() => {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const GRAVITY = 0.7;
  const JUMP_STRENGTH = 15;
  const OBSTACLE_SPEED_START = 6;
  const OBSTACLE_INTERVAL_START = 1500;

  let player, obstacles, score, speed, gameOver, lastObstacleTime;
  let OBSTACLE_INTERVAL = OBSTACLE_INTERVAL_START;

  class Player {
    constructor() {
      this.width = 50;
      this.height = 50;
      this.x = 50;
      this.y = canvas.height - this.height - 30;
      this.dy = 0;
      this.jumping = false;
      this.color = '#4a90e2';
      this.shadowColor = '#2c69a6';
    }

    update() {
      if (this.jumping) {
        this.dy += GRAVITY;
        this.y += this.dy;
        if (this.y >= canvas.height - this.height - 30) {
          this.y = canvas.height - this.height - 30;
          this.jumping = false;
          this.dy = 0;
        }
      }
    }

    jump() {
      if (!this.jumping) {
        this.jumping = true;
        this.dy = -JUMP_STRENGTH;
      }
    }

    draw() {
      let grad = ctx.createLinearGradient(this.x, this.y, this.x + this.width, this.y + this.height);
      grad.addColorStop(0, this.color);
      grad.addColorStop(1, this.shadowColor);

      ctx.fillStyle = grad;
      ctx.shadowColor = '#0f3460';
      ctx.shadowBlur = 15;
      ctx.beginPath();
      roundRect(ctx, this.x, this.y, this.width, this.height, 10);
      ctx.fill();
      ctx.shadowBlur = 0;

      // Eye
      ctx.fillStyle = '#fff';
      ctx.beginPath();
      ctx.arc(this.x + 15, this.y + 20, 6, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = '#0d1b2a';
      ctx.beginPath();
      ctx.arc(this.x + 15, this.y + 20, 3, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  class Obstacle {
    constructor(speed) {
      this.width = 30 + Math.random() * 20;
      this.height = 40 + Math.random() * 30;
      this.x = canvas.width + this.width;
      this.y = canvas.height - this.height - 30;
      this.speed = speed;
      this.color = '#e94560';
      this.shadowColor = '#a43348';
    }

    update() {
      this.x -= this.speed;
    }

    draw() {
      let grad = ctx.createLinearGradient(this.x, this.y, this.x + this.width, this.y + this.height);
      grad.addColorStop(0, this.color);
      grad.addColorStop(1, this.shadowColor);

      ctx.fillStyle = grad;
      ctx.shadowColor = '#a43348';
      ctx.shadowBlur = 12;
      ctx.beginPath();
      roundRect(ctx, this.x, this.y, this.width, this.height, 8);
      ctx.fill();
      ctx.shadowBlur = 0;
    }
  }

  function roundRect(ctx, x, y, width, height, radius) {
    ctx.beginPath();
    ctx.moveTo(x + radius, y);
    ctx.lineTo(x + width - radius, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
    ctx.lineTo(x + width, y + height - radius);
    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
    ctx.lineTo(x + radius, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
    ctx.lineTo(x, y + radius);
    ctx.quadraticCurveTo(x, y, x + radius, y);
    ctx.closePath();
  }

  function isColliding(rect1, rect2) {
    return !(
      rect1.x + rect1.width < rect2.x ||
      rect1.x > rect2.x + rect2.width ||
      rect1.y + rect1.height < rect2.y ||
      rect1.y > rect2.y + rect2.height
    );
  }

  function drawBackground() {
    ctx.fillStyle = '#14233c';
    ctx.fillRect(0, canvas.height - 30, canvas.width, 30);

    ctx.strokeStyle = '#0f3460';
    ctx.lineWidth = 2;
    for(let i = 0; i < canvas.width; i += 40) {
      ctx.beginPath();
      ctx.moveTo(i, canvas.height - 30);
      ctx.lineTo(i + 20, canvas.height - 50);
      ctx.stroke();
    }
  }

  function drawScore(score) {
    ctx.fillStyle = '#4a90e2';
    ctx.font = 'bold 28px Poppins, sans-serif';
    ctx.shadowColor = '#357abd';
    ctx.shadowBlur = 5;
    ctx.fillText(`Score: ${score}`, 20, 40);
    ctx.shadowBlur = 0;
  }

  function init() {
    player = new Player();
    obstacles = [];
    score = 0;
    speed = OBSTACLE_SPEED_START;
    gameOver = false;
    lastObstacleTime = 0;
    OBSTACLE_INTERVAL = OBSTACLE_INTERVAL_START;
    document.getElementById('gameOverScreen').style.display = 'none';
    lastTime = 0;
  }

  function showGameOver() {
    gameOver = true;
    const screen = document.getElementById('gameOverScreen');
    document.getElementById('finalScore').textContent = `Game Over! Your Score: ${score}`;
    screen.style.display = 'block';
  }

  let lastTime = 0;
  function gameLoop(timestamp) {
    if (!lastTime) lastTime = timestamp;
    let delta = timestamp - lastTime;
    lastTime = timestamp;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBackground();

    player.update();
    player.draw();

    if (!gameOver && timestamp - lastObstacleTime > OBSTACLE_INTERVAL) {
      obstacles.push(new Obstacle(speed));
      lastObstacleTime = timestamp;

      speed += 0.1;
      if (OBSTACLE_INTERVAL > 600) {
        OBSTACLE_INTERVAL -= 10;
      }
    }

    for (let i = obstacles.length - 1; i >= 0; i--) {
      obstacles[i].speed = speed;
      obstacles[i].update();
      obstacles[i].draw();

      if (obstacles[i].x + obstacles[i].width < 0) {
        obstacles.splice(i, 1);
        score++;
      } else if (isColliding(player, obstacles[i])) {
        showGameOver();
      }
    }

    drawScore(score);

    if (!gameOver) {
      requestAnimationFrame(gameLoop);
    }
  }

  function onJump() {
    if (!gameOver) player.jump();
  }

  window.addEventListener('keydown', (e) => {
    if (e.code === 'Space') {
      e.preventDefault();
      onJump();
    }
  });

  window.addEventListener('touchstart', (e) => {
    e.preventDefault();
    onJump();
  }, { passive: false });

  document.getElementById('restartBtn').addEventListener('click', () => {
    init();
    requestAnimationFrame(gameLoop);
  });

  init();
  requestAnimationFrame(gameLoop);
})();
</script>

</body>
</html>

